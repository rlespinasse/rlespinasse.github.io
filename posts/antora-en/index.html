<!doctype html><html><head lang=en>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge"><title>Antora 1.0 | Replace your wiki with a documentation site - Romain Lespinasse</title><meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content="Discover Antora as your next documentation site.">
<meta property="og:image" content>
<meta property="og:title" content="Antora 1.0 | Replace your wiki with a documentation site">
<meta property="og:description" content="Discover Antora as your next documentation site.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://www.romainlespinasse.dev/posts/antora-en/"><meta property="og:image" content="https://www.romainlespinasse.dev/img/posts/antora/featured.jpg"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2018-09-11T10:42:00+02:00">
<meta property="article:modified_time" content="2018-09-11T10:42:00+02:00">
<meta name=twitter:card content="summary_large_image">
<meta name=twitter:image content="https://www.romainlespinasse.dev/img/posts/antora/featured.jpg">
<meta name=twitter:title content="Antora 1.0 | Replace your wiki with a documentation site">
<meta name=twitter:description content="Discover Antora as your next documentation site.">
<script src=https://www.romainlespinasse.dev/js/feather.min.js></script>
<link href=https://www.romainlespinasse.dev/css/fonts.2c2227b81b1970a03e760aa2e6121cd01f87c88586803cbb282aa224720a765f.css rel=stylesheet>
<link rel=stylesheet type=text/css media=screen href=https://www.romainlespinasse.dev/css/main.ac08a4c9714baa859217f92f051deb58df2938ec352b506df655005dcaf98cc0.css>
<link id=darkModeStyle rel=stylesheet type=text/css href=https://www.romainlespinasse.dev/css/dark.726cd11ca6eb7c4f7d48eb420354f814e5c1b94281aaf8fd0511c1319f7f78a4.css disabled>
<script type=text/javascript src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script type=text/x-mathjax-config>
		MathJax.Hub.Config({
			tex2jax: {
				inlineMath: [['$','$'], ['\\(','\\)']],
				displayMath: [['$$','$$'], ['\[','\]']],
				processEscapes: true,
				processEnvironments: true,
				skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
				TeX: { equationNumbers: { autoNumber: "AMS" },
						 extensions: ["AMSmath.js", "AMSsymbols.js"] }
			}
		});
		</script>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.js></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/contrib/auto-render.min.js onload=renderMathInElement(document.body)></script>
<script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}]})})</script>
</head>
<body>
<div class=content><header>
<div class=main>
<a href=https://www.romainlespinasse.dev/>Romain Lespinasse</a>
</div>
<nav>
<a href=/>Home</a>
<a href=/posts/>Posts</a>
<a href=/oss/>OSS</a>
<a href=/about/>About</a>
<a href=/tags/>Tags</a>
| <span id=dark-mode-toggle onclick=toggleTheme()></span>
<script src=https://www.romainlespinasse.dev/js/themetoggle.js></script>
</nav>
</header>
<main>
<article>
<div class=title>
<h1 class=title>Antora 1.0 | Replace your wiki with a documentation site</h1>
<div class=meta>Posted on Sep 11, 2018</div>
</div>
<section class=body>
<blockquote>
<p>Bonjour, la version française de cet article peut être lue <a href=/posts/antora/>sur ce site</a></p>
</blockquote>
<p>No matter what your IT project is, there will always be a need to store some documentation.
The choice to use a <a href=https://en.wikipedia.org/wiki/Wiki>wiki</a> is quite common in the corporate world.</p>
<p>Let&rsquo;s talk about you, developer on one of these programs, is documentation of your different projects managed by an easily accessible and editable wiki?</p>
<p>If you look at the content of this wiki, you will probably find:</p>
<ul>
<li>Pages with sections who <code>still need documentation</code>,</li>
<li>Pages with incorrect information,</li>
<li>Deprecated pages,</li>
<li>Pages only useful for one team or another,</li>
<li>Pages with documentation on a feature still in development.</li>
</ul>
<p>So you wonder how to make it easier for people working on different projects.</p>
<p>At this point, the principle of <code>documentation as code</code> seems to be the solution to your needs.</p>
<h2 id=you-embark-on-the-adventure-of-documentation-as-code>You embark on the adventure of documentation as code</h2>
<p>Seeing the documentation as code as the sources of the program is interesting.
You want to replace your current wiki with a project dedicated to documentation, and allowing you to make <code>code review</code> on these changes.
But that only corrects part of the problem, you only replaced wiki pages with files written in another format like:</p>
<ul>
<li>the <a href=https://daringfireball.net/projects/markdown/syntax>Markdown</a> format,</li>
<li>the <a href=http://www.methods.co.nz/asciidoc/>Asciidoc</a> format.</li>
</ul>
<p>Due to its simple and accessible syntax, <code>Markdown</code> is one of the most popular formats, especially on sites like github or gitlab, but it is too simple for further documentation.</p>
<p><code>Asciidoc</code> is <a href=https://github.com/asciidoctor/asciidoctor.org/blob/master/docs/_includes/asciidoc-vs-markdown.adoc>more interesting</a>, allowing to be more expressive with your documentation.
The associated tool <a href=https://asciidoctor.org/>Asciidoctor</a> provides <a href=https://asciidoctor.org/docs/asciidoc-writers-guide/>useful features</a> as well as integrations such as diagram generation with <a href=http://plantuml.com/>plantuml</a>.</p>
<p>You therefore choose to write the <strong>Asciidoctor</strong> documentation in each of your projects.
This allows you to deliver the documentation at the same time as the associated code.</p>
<p>Even if your program consists of a set of projects, each with its own documentation, you want to keep a single site to access them.</p>
<p>The people behind Asciidoctor have recently released an aggregated documentation site generator: <a href=https://antora.org/>Antora</a> in a stable version (<code>1.0.0</code>) to the open-source community.</p>
<p><img src=/img/posts/antora/site.png alt=Antora></p>
<h2 id=you-create-your-new-documentation-site-with-antora--asciidoctor>You create your new documentation site with Antora / Asciidoctor</h2>
<p>A site generated by Antora is <a href=https://docs.antora.org>composed of three elements</a>:</p>
<ul>
<li>Your projects that contain their documentation,</li>
<li>The <a href=https://docs.antora.org/antora/1.0/playbook/><strong>playbook</strong></a> that configures the generation of the documentation site,</li>
<li>A <a href=https://docs.antora.org/antora/1.0/playbook/configure-ui/><strong>UI</strong></a> that defines the visuals of your site (the default one will be appropriate).</li>
</ul>
<p>To be used by Antora, a project must respect a <a href=https://docs.antora.org/antora/1.0/component-structure/>file structure</a></p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Text data-lang=Text>./docs
├── antora.yml
└── modules
    └── ROOT
        ├── _attributes.adoc
        ├── nav.adoc
        └── pages
            ├── _attributes.adoc
            └── index.adoc
</code></pre></div><h3 id=you-set-up-documentation-as-code-on-your-projects>You set up documentation as code on your projects</h3>
<p>So you apply yourself to put it up on:</p>
<ul>
<li>Your APIs (<a href=https://github.com/rlespinasse/api-a>api A</a>, <a href=https://github.com/rlespinasse/api-b>api B</a>, [api C](https : //github.com/rlespinasse/api-c))</li>
<li>Your tools (<a href=https://github.com/rlespinasse/buildtools>build tools</a>),</li>
<li>Your development guide (<a href=https://github.com/rlespinasse/guidelines>guidelines</a>).</li>
</ul>
<p>The documentation in <code>Asciidoctor</code> format is available in the <code>docs</code> folder.</p>
<blockquote>
<p>It is not necessary to use this tree for <code>guideline</code>, which is only a documentation project.</p>
</blockquote>
<h3 id=you-are-preparing-to-generate-your-documentation-site>You are preparing to generate your documentation site</h3>
<p>So you create a <a href=https://github.com/rlespinasse/docssite>specific project</a> to store the <strong>playbook</strong>.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#f92672>site</span>:
  <span style=color:#f92672>title</span>: <span style=color:#e6db74>&#34;Romain Lespinasse // Docs&#34;</span>
  <span style=color:#f92672>start_page</span>: <span style=color:#ae81ff>guidelines::index</span>
  <span style=color:#f92672>url</span>: <span style=color:#ae81ff>https://rlespinasse.github.io/docssite</span>
<span style=color:#f92672>content</span>:
  <span style=color:#f92672>sources</span>:
  - <span style=color:#f92672>url</span>: <span style=color:#ae81ff>https://github.com/rlespinasse/api-a.git</span>
    <span style=color:#f92672>branches</span>: <span style=color:#ae81ff>master</span>
    <span style=color:#f92672>tags</span>: <span style=color:#ae81ff>v*</span>
    <span style=color:#f92672>start_path</span>: <span style=color:#ae81ff>docs</span>
  - <span style=color:#f92672>url</span>: <span style=color:#ae81ff>https://github.com/rlespinasse/api-b.git</span>
    <span style=color:#f92672>branches</span>: <span style=color:#ae81ff>master</span>
    <span style=color:#f92672>tags</span>: <span style=color:#ae81ff>v*</span>
    <span style=color:#f92672>start_path</span>: <span style=color:#ae81ff>docs</span>
  - <span style=color:#f92672>url</span>: <span style=color:#ae81ff>https://github.com/rlespinasse/api-c.git</span>
    <span style=color:#f92672>branches</span>: <span style=color:#ae81ff>master</span>
    <span style=color:#f92672>tags</span>: <span style=color:#ae81ff>v*</span>
    <span style=color:#f92672>start_path</span>: <span style=color:#ae81ff>docs</span>
  - <span style=color:#f92672>url</span>: <span style=color:#ae81ff>https://github.com/rlespinasse/buildtools.git</span>
    <span style=color:#f92672>branches</span>: <span style=color:#ae81ff>master</span>
    <span style=color:#f92672>tags</span>: <span style=color:#ae81ff>v*</span>
    <span style=color:#f92672>start_path</span>: <span style=color:#ae81ff>docs</span>
  - <span style=color:#f92672>url</span>: <span style=color:#ae81ff>https://github.com/rlespinasse/guidelines.git</span>
    <span style=color:#f92672>branches</span>: <span style=color:#ae81ff>master</span>
<span style=color:#f92672>ui</span>:
  <span style=color:#f92672>bundle</span>:
    <span style=color:#f92672>url</span>: <span style=color:#ae81ff>https://gitlab.com/antora/antora-ui-default/-/jobs/artifacts/master/raw/build/ui-bundle.zip?job=bundle-stable</span>
    <span style=color:#f92672>snapshot</span>: <span style=color:#66d9ef>true</span>
  <span style=color:#f92672>output_dir</span>: <span style=color:#ae81ff>ui-bundle</span>
  <span style=color:#f92672>supplemental_files</span>: <span style=color:#ae81ff>./supplemental-ui</span>
<span style=color:#f92672>output</span>:
  <span style=color:#f92672>dir</span>: <span style=color:#ae81ff>./docs</span>
</code></pre></div><p>The content of the <a href=https://docs.antora.org/antora/1.0/playbook/playbook/>playbook</a> <code>site.yml</code> defines:</p>
<ul>
<li>the <a href=https://docs.antora.org/antora/1.0/playbook/configure-site/>related information</a> to the site itself via <code>site:</code>,</li>
<li>the definition of <a href=https://docs.antora.org/antora/1.0/playbook/configure-content-sources/>content</a> via <code>content:</code>,</li>
<li>the <a href=https://docs.antora.org/antora/1.0/playbook/configure-ui/>theme of the site</a> via <code>ui:</code>,</li>
<li>The <a href=https://docs.antora.org/antora/1.0/playbook/configure-output/>build folder</a> via <code>output:</code>.</li>
</ul>
<p>The official documentation does not refer to it because it is a <a href=https://gitlab.com/antora/antora/issues/147>development still experimental</a> but you set up the navigation bar to add the useful links via a <code>header-content.hbs</code> file in <code>supplemental-ui/partials/</code>.</p>
<blockquote>
<p>Other template files are available for replacement in <a href=https://gitlab.com/antora/antora-ui-default/tree/master/src/partials>Antora Default UI</a>.</p>
</blockquote>
<h2 id=you-generate-and-deploy-your-new-documentation-site>You generate and deploy your new documentation site</h2>
<p>You can install antora via this <a href=https://docs.antora.org/antora/1.0/install/install-antora/>guide</a> or use the docker image via the <code>docker run -v `pwd` command: / antora --rm antora / antora --stacktrace site.yml</code> (where <strong>site.yml</strong> is the playbook)</p>
<p>The playbook defines the <code>docs</code> folder to make your new documentation site available.</p>
<p><img src=/img/posts/antora/site-preview.png alt="Site preview"></p>
<p>For example, to make it accessible on Github, you deploy it via the Github Pages of your <code>docssite</code> project.</p>
<p><img src=/img/posts/antora/github.png alt="Github document configuration"></p>
<p>The platform will automatically expose the contents of the <code>/docs</code> folder to <a href=https://rlespinasse.github.io/docssite>https://rlespinasse.github.io/docssite</a>.</p>
<h2 id=you-make-others-benefit-from-the-new-documentation-site>You make others benefit from the new documentation site</h2>
<p>From now on, people working on the program will be able to add, create, and maintain documentation of each project very easily. Your new documentation site gives the access to all these pages.</p>
<p>The site <a href=https://docs.antora.org>docs.antora.org</a> uses the <code>Antora</code> project itself.</p>
<blockquote>
<p>Thanks to <a href=https://twitter.com/sn0rks>Aurélien Allienne</a>, <a href=https://twitter.com/AMeausoone>Antoine Méausoone</a>, <a href=https://twitter.com/TanguyBAUDRIN>Tanguy Baudrin</a>, and <a href=https://twitter.com/chezTone>Tony Proum</a> for reviewing the article.
Thanks to <a href=https://twitter.com/sn0rks>Aurélien Allienne</a>, <a href=http://twitter.com/MrGuiMan>Guillaume Mantopoulos</a> for the review of the translation from french to english of this article .</p>
</blockquote>
<p>This post have been published first on <a href=https://medium.com/codeshake/replace-your-wiki-with-a-documentation-site-4f0da329fe92>Codeshake by SFEIR</a>.</p>
</section>
<div class=post-tags>
<nav class="nav tags">
<ul class=tags>
<li><a href=/tags/antora>antora</a></li>
<li><a href=/tags/asciidoctor>asciidoctor</a></li>
</ul>
</nav>
</div>
</article>
</main>
<footer>
<div style=display:flex><a class=soc href=https://github.com/rlespinasse rel=me title=GitHub><i data-feather=github></i></a>
<a class=border></a><a class=soc href=https://www.linkedin.com/in/romain-lespinasse rel=me title=LinkedIn><i data-feather=linkedin></i></a>
<a class=border></a><a class=soc href=https://bsky.app/profile/rlespinasse.bsky.social rel=me title=Bluesky><i data-feather=cloud></i></a>
<a class=border></a></div>
<div class=footer-info>
2024 © Romain Lespinasse | <a href=https://github.com/athul/archie>Archie Theme</a> | Built with <a href=https://gohugo.io>Hugo</a>
</div>
</footer>
<script>feather.replace()</script></div>
</body>
</html>